#!/usr/bin/env zsh
source ${0:A:h}/../../deploy

# only for macOS
[[ $(_os) != macos ]] && exit

brew_deps=(
  node
  karabiner-elements
)

# link() {
# }

install() {
  brew install ${brew_deps[@]}
  npm install
}

update() {
  npx tsc && node ./dist/config/karabiner.js > "${KARABINER_CONFIG_DIR}/karabiner.json"
}

clean() {
  rm -rfv "$KARABINER_CONFIG_DIR/karabiner.json"
}

init "$@"
